(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/annex/special/index"],{"061c":function(n,e,t){"use strict";t.r(e);var o=t("1dd7"),i=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(a);e["default"]=i.a},"1cc6":function(n,e,t){"use strict";var o=t("2296"),i=t.n(o);i.a},"1dd7":function(n,e,t){"use strict";(function(n,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=t("a2c9"),a=t("771e"),c=t("6188"),r=t("26cb"),s=t("a612"),u=t("2a40"),l=t("23b4"),d=(getApp(),{computed:(0,r.mapGetters)(["isLogin","uid"]),components:{pageFooter:function(){Promise.all([t.e("common/vendor"),t.e("components/pageFooter/index")]).then(function(){return resolve(t("9a5a"))}.bind(null,t)).catch(t.oe)},couponWindow:function(){Promise.all([t.e("common/vendor"),t.e("components/couponWindow/index")]).then(function(){return resolve(t("263f"))}.bind(null,t)).catch(t.oe)},authorize:function(){t.e("components/Authorize").then(function(){return resolve(t("1fc0"))}.bind(null,t)).catch(t.oe)},activeParty:function(){t.e("pages/index/components/activeParty").then(function(){return resolve(t("a04d"))}.bind(null,t)).catch(t.oe)},headerSerch:function(){t.e("pages/index/components/headerSerch").then(function(){return resolve(t("7360"))}.bind(null,t)).catch(t.oe)},swipers:function(){t.e("pages/index/components/swipers").then(function(){return resolve(t("8582"))}.bind(null,t)).catch(t.oe)},coupon:function(){t.e("pages/index/components/coupon").then(function(){return resolve(t("c415"))}.bind(null,t)).catch(t.oe)},articleList:function(){t.e("pages/index/components/articleList").then(function(){return resolve(t("b25e"))}.bind(null,t)).catch(t.oe)},bargain:function(){Promise.all([t.e("common/vendor"),t.e("pages/index/components/bargain")]).then(function(){return resolve(t("84f3"))}.bind(null,t)).catch(t.oe)},blankPage:function(){t.e("pages/index/components/blankPage").then(function(){return resolve(t("fcf8"))}.bind(null,t)).catch(t.oe)},combination:function(){Promise.all([t.e("common/vendor"),t.e("pages/index/components/combination")]).then(function(){return resolve(t("7b14"))}.bind(null,t)).catch(t.oe)},customerService:function(){t.e("pages/index/components/customerService").then(function(){return resolve(t("be7a"))}.bind(null,t)).catch(t.oe)},goodList:function(){t.e("pages/index/components/goodList").then(function(){return resolve(t("1366"))}.bind(null,t)).catch(t.oe)},guide:function(){t.e("pages/index/components/guide").then(function(){return resolve(t("56a2"))}.bind(null,t)).catch(t.oe)},liveBroadcast:function(){t.e("pages/index/components/liveBroadcast").then(function(){return resolve(t("c4e9"))}.bind(null,t)).catch(t.oe)},menus:function(){t.e("pages/index/components/menus").then(function(){return resolve(t("929c"))}.bind(null,t)).catch(t.oe)},news:function(){t.e("pages/index/components/news").then(function(){return resolve(t("a2fe"))}.bind(null,t)).catch(t.oe)},promotionList:function(){t.e("pages/index/components/promotionList").then(function(){return resolve(t("c6a6"))}.bind(null,t)).catch(t.oe)},richText:function(){t.e("pages/index/components/richText").then(function(){return resolve(t("94e9"))}.bind(null,t)).catch(t.oe)},seckill:function(){Promise.all([t.e("common/vendor"),t.e("pages/index/components/seckill")]).then(function(){return resolve(t("53b9"))}.bind(null,t)).catch(t.oe)},swiperBg:function(){t.e("pages/index/components/swiperBg").then(function(){return resolve(t("e53c"))}.bind(null,t)).catch(t.oe)},tabNav:function(){t.e("pages/index/components/tabNav").then(function(){return resolve(t("c302"))}.bind(null,t)).catch(t.oe)},titles:function(){t.e("pages/index/components/titles").then(function(){return resolve(t("9a1f"))}.bind(null,t)).catch(t.oe)},pictureCube:function(){t.e("pages/index/components/pictureCube").then(function(){return resolve(t("f308"))}.bind(null,t)).catch(t.oe)}},data:function(){return{styleConfig:[],tempArr:[],goodType:3,loading:!1,loadend:!1,loadTitle:"加载更多",page:1,limit:this.$config.LIMIT,iSshowH:!1,numConfig:0,code:"",isCouponShow:!1,couponObj:{},couponObjs:{},shareInfo:{},footConfig:{},pageId:"",sortMpTop:0,newData:{},activeRouter:"",footerStatus:!1,bgColor:"",bgPic:"",bgTabVal:"",pageShow:!0,windowHeight:0}},onLoad:function(e){var t=this,o=this;this.$nextTick((function(){n.getSystemInfo({success:function(n){o.windowHeight=n.windowHeight}})}));e.state,e.scope;if(this.pageId=e.id,e.scene){var i=o.$util.getUrlParams(decodeURIComponent(e.scene));this.pageId=i.id}n.setNavigationBarTitle({title:"专题栏"}),n.getLocation({type:"wgs84",success:function(e){try{n.setStorageSync("user_latitude",e.latitude),n.setStorageSync("user_longitude",e.longitude)}catch(t){}}}),this.diyData(),this.getIndexData(),this.getTemlIds(),(0,a.getShare)().then((function(n){t.shareInfo=n.data}));var c=getCurrentPages(),r=c[c.length-1].route;this.activeRouter="/"+r+"?id="+this.pageId},watch:{isLogin:{deep:!0,handler:function(e,t){var o=(new Date).toLocaleDateString();if(e){try{var i=n.getStorageSync("oldDate")||""}catch(a){}i!=o&&this.getCoupon()}}}},onShow:function(){var e=(new Date).toLocaleDateString();if(this.isLogin){try{var t=n.getStorageSync("oldDate")||""}catch(i){}t!=e&&this.getCoupon();var o=n.getStorageSync("oldUser")||0;o||this.getCouponOnce()}},mounted:function(){},methods:{goRouter:function(e){var t=getCurrentPages(),o=t[t.length-1].$page.fullPath;e.link!=o&&n.switchTab({url:e.link,fail:function(t){n.redirectTo({url:e.link})}})},getCouponOnce:function(){var n=this;(0,i.getCouponNewUser)().then((function(e){n.couponObjs=e.data}))},couponCloses:function(){this.couponObjs.show=!1;try{n.setStorageSync("oldUser",1)}catch(e){}},getCoupon:function(){var n=this;(0,i.getCouponV2)().then((function(e){n.couponObj=e.data,e.data.list.length>0&&(n.isCouponShow=!0)}))},couponClose:function(){this.isCouponShow=!1;try{n.setStorageSync("oldDate",(new Date).toLocaleDateString())}catch(e){}},onLoadFun:function(){},getTemlIds:function(){var n=o.getStorageSync(c.SUBSCRIBE_MESSAGE);n||(0,i.getTemlIds)().then((function(n){n.data&&o.setStorageSync(c.SUBSCRIBE_MESSAGE,JSON.stringify(n.data))}))},objToArr:function(n){var e=Object.keys(n);e.sort((function(n,e){return n-e}));var t=e.map((function(e){return n[e]}));return t},diyData:function(){var e=this,t=this;(0,i.getDiy)(this.pageId).then((function(o){var i=o.data;if(0==o.data.length)return e.$util.Tips({title:"暂无数据"},{tab:3});i.is_bg_color&&(e.bgColor=i.color_picker),i.is_bg_pic&&(e.bgPic=i.bg_pic,e.bgTabVal=i.bg_tab_val),e.pageShow=i.is_show,n.setNavigationBarTitle({title:o.data.title});var a=[],c=t.objToArr(o.data.value);c.forEach((function(o,i,c){"pageFoot"==o.name&&(n.setStorageSync("pageFoot",o),t.$store.commit("FOOT_UPLOAD",o),c.splice(i,1),e.newData=o,e.footerStatus=o.status.status),"promotionList"==o.name&&(t.numConfig=o.numConfig.val,t.getGroomList()),a=c})),t.styleConfig=a}))},getIndexData:function(){},changeBarg:function(e){this.isLogin?n.navigateTo({url:"/pages/activity/goods_bargain_details/index?id=".concat(e.id,"&bargain=").concat(this.uid)}):(0,l.toLogin)()},changeTab:function(n){this.goodType=n,this.tempArr=[],this.page=1,this.loadend=!1;this.getGroomList(!0)},getGroomList:function(n){var e=this,t=this,o=t.goodType;return!t.loadend&&(!t.loading&&(n&&t.$set(t,"iSshowH",!0),void(0,s.getGroomList)(o,{page:t.page,limit:t.limit}).then((function(n){var o=n.data;t.$set(t,"iSshowH",!1);var i=Math.ceil(e.numConfig/e.limit),a=o.list,c=a.length<t.limit||t.page>=i,r=t.$util.SplitArray(a,t.tempArr);t.$set(t,"tempArr",r.slice(0,e.numConfig)),t.loadend=c,t.loadTitle=c?"没有更多内容啦~":"加载更多",t.page=t.page+1,t.loading=!1})).catch((function(n){t.loading=!1,t.loadTitle="加载更多"}))))},goDetail:function(e){(0,u.goShopDetail)(e,this.uid).then((function(t){n.navigateTo({url:"/pages/goods_details/index?id=".concat(e.id)})}))}},onReachBottom:function(){this.getGroomList()},onShareAppMessage:function(){return{title:this.shareInfo.title,path:"/pages/index/index",imageUrl:this.storeInfo.img}}});e.default=d}).call(this,t("543d")["default"],t("bc2e")["default"])},2296:function(n,e,t){},5583:function(n,e,t){"use strict";(function(n,e){var o=t("4ea4");t("98d3");o(t("66fd"));var i=o(t("fd6f"));n.__webpack_require_UNI_MP_PLUGIN__=t,e(i.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"742f":function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){}));var o=function(){var n=this.$createElement,e=(this._self._c,this.pageShow?this.tempArr.length&&"promotionList"==this.styleConfig[this.styleConfig.length-1].name:null);this.$mp.data=Object.assign({},{$root:{g0:e}})},i=[]},fd6f:function(n,e,t){"use strict";t.r(e);var o=t("742f"),i=t("061c");for(var a in i)["default"].indexOf(a)<0&&function(n){t.d(e,n,(function(){return i[n]}))}(a);t("1cc6");var c=t("f0c5"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=r.exports}},[["5583","common/runtime","common/vendor"]]]);