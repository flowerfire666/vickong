(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"36c6":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.pageShow&&!t.errorNetwork&&1==t.isSortType?t.sortList.children&&t.sortList.children.length:null),o=t.pageShow&&!t.errorNetwork&&1==t.isSortType?t.goodList.length:null,i=t.pageShow&&!t.errorNetwork&&1==t.isSortType?0==t.goodList.length&&t.loaded:null;t.$mp.data=Object.assign({},{$root:{g0:n,g1:o,g2:i}})},i=[]},"8f70":function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("98d3");o(n("66fd"));var i=o(n("ec73"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},a8b0:function(t,e,n){},b16a:function(t,e,n){"use strict";var o=n("a8b0"),i=n.n(o);i.a},c9f9:function(t,e,n){"use strict";n.r(e);var o=n("e084"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},e084:function(t,e,n){"use strict";(function(t,o){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,c=i(n("9523")),s=i(n("6a7c")),r=(i(n("ec77")),n("a2c9")),u=n("771e"),d=n("6188"),l=n("26cb"),g=n("a612"),h=n("2a40"),f=n("aa99"),p=n("23b4"),m=getApp(),b=(a={computed:(0,l.mapGetters)(["isLogin","uid"]),mixins:[s.default],components:{recommend:function(){Promise.all([n.e("common/vendor"),n.e("components/recommend/index")]).then(function(){return resolve(n("6c16"))}.bind(null,n)).catch(n.oe)},Loading:function(){n.e("components/Loading/index").then(function(){return resolve(n("ddb8"))}.bind(null,n)).catch(n.oe)},pageFooter:function(){Promise.all([n.e("common/vendor"),n.e("components/pageFooter/index")]).then(function(){return resolve(n("9a5a"))}.bind(null,n)).catch(n.oe)},couponWindow:function(){Promise.all([n.e("common/vendor"),n.e("components/couponWindow/index")]).then(function(){return resolve(n("263f"))}.bind(null,n)).catch(n.oe)},authorize:function(){n.e("components/Authorize").then(function(){return resolve(n("1fc0"))}.bind(null,n)).catch(n.oe)},activeParty:function(){n.e("pages/index/components/activeParty").then(function(){return resolve(n("a04d"))}.bind(null,n)).catch(n.oe)},headerSerch:function(){n.e("pages/index/components/headerSerch").then(function(){return resolve(n("7360"))}.bind(null,n)).catch(n.oe)},swipers:function(){n.e("pages/index/components/swipers").then(function(){return resolve(n("8582"))}.bind(null,n)).catch(n.oe)},coupon:function(){n.e("pages/index/components/coupon").then(function(){return resolve(n("c415"))}.bind(null,n)).catch(n.oe)},articleList:function(){n.e("pages/index/components/articleList").then(function(){return resolve(n("b25e"))}.bind(null,n)).catch(n.oe)},bargain:function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/bargain")]).then(function(){return resolve(n("84f3"))}.bind(null,n)).catch(n.oe)},blankPage:function(){n.e("pages/index/components/blankPage").then(function(){return resolve(n("fcf8"))}.bind(null,n)).catch(n.oe)},combination:function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/combination")]).then(function(){return resolve(n("7b14"))}.bind(null,n)).catch(n.oe)},customerService:function(){n.e("pages/index/components/customerService").then(function(){return resolve(n("be7a"))}.bind(null,n)).catch(n.oe)},goodList:function(){n.e("pages/index/components/goodList").then(function(){return resolve(n("1366"))}.bind(null,n)).catch(n.oe)},guide:function(){n.e("pages/index/components/guide").then(function(){return resolve(n("56a2"))}.bind(null,n)).catch(n.oe)},liveBroadcast:function(){n.e("pages/index/components/liveBroadcast").then(function(){return resolve(n("c4e9"))}.bind(null,n)).catch(n.oe)},menus:function(){n.e("pages/index/components/menus").then(function(){return resolve(n("929c"))}.bind(null,n)).catch(n.oe)},pictureCube:function(){n.e("pages/index/components/pictureCube").then(function(){return resolve(n("f308"))}.bind(null,n)).catch(n.oe)},news:function(){n.e("pages/index/components/news").then(function(){return resolve(n("a2fe"))}.bind(null,n)).catch(n.oe)},promotionList:function(){n.e("pages/index/components/promotionList").then(function(){return resolve(n("c6a6"))}.bind(null,n)).catch(n.oe)},richText:function(){n.e("pages/index/components/richText").then(function(){return resolve(n("94e9"))}.bind(null,n)).catch(n.oe)},seckill:function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/seckill")]).then(function(){return resolve(n("53b9"))}.bind(null,n)).catch(n.oe)},swiperBg:function(){n.e("pages/index/components/swiperBg").then(function(){return resolve(n("e53c"))}.bind(null,n)).catch(n.oe)},tabNav:function(){n.e("pages/index/components/tabNav").then(function(){return resolve(n("c302"))}.bind(null,n)).catch(n.oe)},titles:function(){n.e("pages/index/components/titles").then(function(){return resolve(n("9a1f"))}.bind(null,n)).catch(n.oe)}}},(0,c.default)(a,"computed",(0,l.mapGetters)(["isLogin","cartNum"])),(0,c.default)(a,"data",(function(){var t;return t={showSkeleton:!0,isNodes:0,styleConfig:[],tempArr:[],goodType:3,loading:!1,loadend:!1,loadTitle:"下拉加载更多",page:1,limit:this.$config.LIMIT,iSshowH:!1,numConfig:0,code:"",isCouponShow:!1,couponObj:{},couponObjs:{show:!1},shareInfo:{},footConfig:{},isSortType:0,sortList:"",sortAll:[],goodPage:1,goodList:[],newData:{},sid:0,curSort:0,sortMpTop:0,loaded:!1},(0,c.default)(t,"loading",!1),(0,c.default)(t,"hostProduct",[]),(0,c.default)(t,"hotScroll",!1),(0,c.default)(t,"hotPage",1),(0,c.default)(t,"hotLimit",10),(0,c.default)(t,"domOffsetTop",50),(0,c.default)(t,"isFixed",!0),(0,c.default)(t,"site_config",""),(0,c.default)(t,"errorNetwork",!1),(0,c.default)(t,"footerStatus",!1),(0,c.default)(t,"isHeaderSerch",!1),(0,c.default)(t,"bgColor",""),(0,c.default)(t,"bgPic",""),(0,c.default)(t,"bgTabVal",""),(0,c.default)(t,"pageShow",!0),(0,c.default)(t,"showDialog",!0),(0,c.default)(t,"windowHeight",0),(0,c.default)(t,"activeRouter",""),(0,c.default)(t,"countNum",0),t})),(0,c.default)(a,"onLoad",(function(e){var n=this,o=this;o.getOptions(e),this.$nextTick((function(){t.getSystemInfo({success:function(t){o.windowHeight=t.windowHeight}})}));var i=getCurrentPages(),a=i[i.length-1].route;this.activeRouter="/"+a;e.state,e.scope;t.getLocation({type:"wgs84",success:function(e){try{t.setStorageSync("user_latitude",e.latitude),t.setStorageSync("user_longitude",e.longitude)}catch(n){}}}),this.diyData(),this.getIndexData(),this.getTemlIds(),(0,u.getShare)().then((function(t){n.shareInfo=t.data}))})),(0,c.default)(a,"watch",{isLogin:{deep:!0,handler:function(e,n){var o=(new Date).toLocaleDateString();if(e){try{var i=t.getStorageSync("oldDate")||""}catch(a){}i!=o&&this.getCoupon()}}}}),(0,c.default)(a,"onShow",(function(){var e=this;(0,u.getNavigation)().then((function(n){e.newData=n.data,e.newData.status&&e.newData.status.status?t.hideTabBar():t.showTabBar()})),(0,r.siteConfig)().then((function(t){e.site_config=t.data.record_No})).catch((function(t){})),this.isLogin&&(this.getCoupon(),(0,f.getCartCounts)().then((function(n){e.countNum=n.data.count,e.$store.commit("indexData/setCartNum",n.data.count>99?"..":n.data.count+""),n.data.count>0?o.setTabBarBadge({index:Number(t.getStorageSync("FOOTER_ADDCART"))||2,text:n.data.count+""}):o.hideTabBarRedDot({index:Number(t.getStorageSync("FOOTER_ADDCART"))||2})})))})),(0,c.default)(a,"onReady",(function(){})),(0,c.default)(a,"methods",{confirmDialog:function(){this.setData({showDialog:!0})},getOptions:function(t){if(t.scene){var e=this.$util.getUrlParams(decodeURIComponent(t.scene));e.pid&&(m.globalData.spid=e.pid)}t.pid&&(m.globalData.spid=t.pid)},reconnect:function(){var e=this;t.showLoading({title:"加载中"}),this.diyData(),this.getIndexData(),(0,u.getShare)().then((function(t){e.shareInfo=t.data}))},goICP:function(){t.navigateTo({url:"/pages/annex/web_view/index?url=https://beian.miit.gov.cn/"})},bindHeighta:function(t){},bindHeight:function(e){t.hideLoading(),this.domOffsetTop=e.top},goGoodsDetail:function(e){(0,h.goShopDetail)(e,this.uid).then((function(n){t.navigateTo({url:"/pages/goods_details/index?id=".concat(e.id)})}))},get_host_product:function(){var t=this;t.hotScroll||(0,g.getProductHot)(t.hotPage,t.hotLimit).then((function(e){t.hotPage++,t.hotScroll=e.data.length<t.hotLimit,t.hostProduct=t.hostProduct.concat(e.data)}))},changeSort:function(t,e){this.curSort!=e&&(this.curSort=e,this.sid=t.id,this.goodList=[],this.goodPage=1,this.loaded=!1,this.getGoodsList())},bindSortId:function(t){this.isSortType=-99==t?0:1,this.getProductList(t),0==this.hostProduct.length&&this.get_host_product()},getProductList:function(t){var e=this;this.curSort=0,this.loaded=!1,this.sortAll.length>0?(this.sortAll.forEach((function(n,o){n.id==t&&(e.$set(e,"sortList",n),e.sid=n.children.length?n.children[0].id:"")})),this.goodList=[],this.goodPage=1,this.$nextTick((function(){""!=e.sortList&&e.getGoodsList()}))):(0,g.getCategoryList)().then((function(n){e.sortAll=n.data,n.data.forEach((function(n,o){n.id==t&&(e.sortList=n,e.sid=n.children.length?n.children[0].id:"")})),e.goodList=[],e.goodPage=1,e.$nextTick((function(){""!=e.sortList&&e.getGoodsList()}))}))},getGoodsList:function(){var t=this;this.loading||this.loaded||(this.loading=!0,(0,g.getProductslist)({sid:this.sid,keyword:"",priceOrder:"",salesOrder:"",news:0,page:this.goodPage,limit:10,cid:this.sortList.id}).then((function(e){t.loading=!1,t.loaded=e.data.length<10,t.goodPage++,t.goodList=t.goodList.concat(e.data)})))},getNewCoupon:function(){var e=this,n=t.getStorageSync("oldUser")||0;n||(0,r.getCouponNewUser)().then((function(n){var o=n.data;o.show?o.list.length&&(e.isCouponShow=!0,e.couponObj=o,t.setStorageSync("oldUser",1)):t.setStorageSync("oldUser",1)}))},getCoupon:function(){var e=this,n=t.getStorageSync("tagDate")||"",o=(new Date).toLocaleDateString();n===o?this.getNewCoupon():(0,r.getCouponV2)().then((function(n){var o=n.data;o.list.length?(e.isCouponShow=!0,e.couponObj=o,t.setStorageSync("tagDate",(new Date).toLocaleDateString())):e.getNewCoupon()}))},couponClose:function(){this.isCouponShow=!1,t.getStorageSync("oldUser")||this.getNewCoupon()},onLoadFun:function(){},getTemlIds:function(){var t=o.getStorageSync(d.SUBSCRIBE_MESSAGE);t||(0,r.getTemlIds)().then((function(t){t.data&&o.setStorageSync(d.SUBSCRIBE_MESSAGE,JSON.stringify(t.data))}))},objToArr:function(t){var e=Object.keys(t),n=e.map((function(e){return t[e]}));return n},diyData:function(){var e=this,n=this;(0,r.getDiy)(0).then((function(o){setTimeout((function(){e.isNodes++}),0),e.errorNetwork=!1;var i=o.data;i.is_bg_color&&(e.bgColor=i.color_picker),i.is_bg_pic&&(e.bgPic=i.bg_pic,e.bgTabVal=i.bg_tab_val),e.pageShow=i.is_show,t.setNavigationBarTitle({title:o.data.title});var a=[],c=n.objToArr(o.data.value);c.forEach((function(o,i,c){"headerSerch"==o.name&&(e.isHeaderSerch=!0),"pageFoot"==o.name&&(o.menuList.map((function(e,n){"/pages/order_addcart/order_addcart"===e.link&&t.setStorageSync("FOOTER_ADDCART",n)})),c.splice(i,1)),"promotionList"==o.name&&(n.numConfig=o.numConfig.val,n.goodType=o.tabConfig.list[0].link.activeVal,n.getGroomList()),o.name,a=c})),a.sort((function(t,e){return t.timestamp-e.timestamp})),n.styleConfig=a,setTimeout((function(){e.showSkeleton=!1}),1e3)})).catch((function(t){}))},getIndexData:function(){},changeBarg:function(e){this.isLogin?t.navigateTo({url:"/pages/activity/goods_bargain_details/index?id=".concat(e.id,"&bargain=").concat(this.$store.state.app.uid)}):(0,p.toLogin)()},changeTab:function(t){this.goodType=t,this.tempArr=[],this.page=1,this.loadend=!1;this.getGroomList(!0)},getGroomList:function(t){var e=this,n=this,o=n.goodType;return!n.loadend&&(!n.loading&&(t&&n.$set(n,"iSshowH",!0),void(0,g.getGroomList)(o,{page:n.page,limit:this.numConfig}).then((function(t){var o=t.data;n.$set(n,"iSshowH",!1);var i=Math.ceil(e.numConfig/e.limit),a=o.list,c=a.length<n.limit||n.page>=i,s=n.$util.SplitArray(a,n.tempArr);n.$set(n,"tempArr",s.slice(0,e.numConfig)),n.loadend=c,n.loadTitle=c?"没有更多内容啦~":"加载更多",n.page=n.page+1,n.loading=!1})).catch((function(t){n.loading=!1,n.loadTitle="加载更多"}))))},goRouter:function(e){var n=getCurrentPages(),o=n[n.length-1].$page.fullPath;e.link!=o&&t.switchTab({url:e.link,fail:function(n){t.redirectTo({url:e.link})}})},goDetail:function(e){(0,h.goShopDetail)(e,this.$store.state.app.uid).then((function(n){t.navigateTo({url:"/pages/goods_details/index?id=".concat(e.id)})}))}}),(0,c.default)(a,"onReachBottom",(function(){0==this.isSortType||this.getGoodsList()})),(0,c.default)(a,"onPageScroll",(function(t){})),(0,c.default)(a,"onShareAppMessage",(function(){var t=this.uid?this.uid:0;return{title:this.shareInfo.title,path:"/pages/index/index?pid="+t}})),(0,c.default)(a,"onShareTimeline",(function(){return{title:this.shareInfo.title,path:"/pages/index/index"}})),a);e.default=b}).call(this,n("543d")["default"],n("bc2e")["default"])},ec73:function(t,e,n){"use strict";n.r(e);var o=n("36c6"),i=n("c9f9");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("b16a");var c=n("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=s.exports}},[["8f70","common/runtime","common/vendor"]]]);